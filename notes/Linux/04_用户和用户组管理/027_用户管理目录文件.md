# 用户管理目录文件
# 一、用户的家目录
1. 普通用户：/home/用户名/，所有者和所属组都是此用户，权限是700

![img_1232.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_1232.png)

1. 超级用户：/root/，所有者和所属组都是root用户，权限是550

![img_688.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_688.png)

# 二、用户的邮箱
1. /var/spool/mail/用户名



# 三、/etc/skel目录
1.  /etc/skel目录是用来存放新用户配置文件的目录，当我们添加新用户时，这个目录下的所有文件都会自动被复制到新添加的用户的家目录下
2. 默认情况下，/etc/skel目录下的所有文件都是隐藏文件(以.点开头)；通过修改、添加、删除/etc/skel目录下的文件，我们可为新创建的用户提供统一、标准的、初始化用户环境。

![img_3776.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_3776.png)

1. 当我们用useradd      或adduser命令添加新用户时，linux系统会自动复制/etc/skel下的所有文件(包括隐藏文件)到新添加用户的家目录

![img_3872.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_3872.png)

# 四、/etc/login.defs
1.  /etc/login.defs文件是用来定义创建用户时需要的一些用户的配置文件。如创建用户时，是否需要家目录，UID和GID的范围，用户及密码的有效期限等等。
2. 字段说明

| MAIL_DIR   /var/spool/mail | 创建用户时，要在目录/var/spool/mail中创建一个用户mail文件 |
| --- | --- |
| PASS_MAX_DAYS   99999 | 一个密码最长可以使用的天数 |
| PASS_MIN_DAYS   0 | 更改密码的最小天数 |
| PASS_MIN_LEN    5 | 密码的最小长度 |
| PASS_WARN_AGE   7 | 密码失效提前多少天开始警告 |
| UID_MIN   1000 | UID从1000开始 |
| UID_MAX  60000 | 最大UID为60000 |
| SYS_UID_MIN  201 | SYS_UID从201开始 |
| SYS_UID_MAX   999 | 最大SYS_UID为 999 |
| GID_MIN   500 | GID依然是从500开始 |
| GID_MAX 60000 | 同上面用户的情况 |
| CREATE_HOME  yes | 是否创建用户家目录，默认要求创建 |
| UMASK  077  | 权限掩码，最大权限777减去它就是创建目录默认权限 |
| USERGROUPS_ENAB   yes | 删除用户同时删除用户组 |
| ENCRYPT_METHOD   SHA512 | 密码加密方式为SHA512 |


# 五、/etc/default/useradd文件
1. /etc/default/useradd文件是在使用useradd添加用户时需要调用的一个默认的配置文件，可以使用useradd      -D参数，这样的命令格式来修改文件里面的内容，当然也可以直接编辑修改。

![img_3440.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_3440.png)

| GROUP=100 | 用户默认组 |
| --- | --- |
| HOME=/home | 用户家目录 |
| INACTIVE=-I | 是否启动账号过期停权，-1表示不启用 |
| EXPIRE= | 账号终止日期，不设置表示不启用 |
| SHELL=/bin/bash | 默认shell |
| SKEL=/etc/skel | 模板目录 |
| CREATE_MAIL_SPOOL=yes | 是否建立邮箱 |


# 六、验证实例
[root@localhost ~]# mkdir /ett

[root@localhost ~]# cp -a /etc/skel/* /ett/  #把skel目录下的文件复制到/ett下

[root@localhost ~]# ls -al /ett/

[root@localhost ~]# mkdir /ett/test   #创建一个测试目录test

[root@localhost ~]# ls -al /ett/

[root@localhost ~]#sed -i 's#SKEL=/etc/skel#SKEL=/ett#g' /etc/default/useradd    #修改SKEL的默认路径

[root@localhost ~]# grep ett /etc/default/useradd 

SKEL=/ett

[root@localhost ~]# useradd old  #添加用户old测试

[root@localhost ~]# ll /home/old -al

total 32

drwx------ 3 old  old  4096 May 2 22:56 .

drwxr-xr-x 6 root root 4096 May  2 22:56 ..

-rw-r--r-- 1 old  old     7 May 2 22:56 oldboy  #发现/ett下的目录和文件都拷贝过来了

drwxr-xr-x 2 old  old  4096 May 2 22:56 test

[root@localhost ~]# sed -i 's#SKEL=/ett#SKEL=/etc/skel#g' /etc/default/useradd   #测试完后还原配置

[root@localhost ~]# grep etc /etc/default/useradd 

SKEL=/etc/skel

特别提醒：上面的例子是更改/etc/default/useradd中SKEL路径后测试的例子。其他参数的修改方法


