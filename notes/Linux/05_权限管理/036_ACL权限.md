# ACL权限
# 一、ACL权限简介
![](https://via.placeholder.com/800x600?text=Image+890365e78a810f5c)

+ 忽略所有者、所属组、其他人权限，直接给指定的用户指定目录分配指定的权限

# 二、分区ACL权限
1. 查看分区ACL权限是否开启（默认开启）

[root@localhost~]#dumpe2fs -h /dev/sda3

+ dumpe2fs命令是查询指定分区详细文件系统信息的命令
+ 选项：-h 仅显示超级块中信息，而不显示磁盘块组的详细信息
1. 临时开启分区ACL权限

[root@localhos~]#mount -o remount,acl /

+ 重新挂载根分区，并挂载cal权限
1. 永久开启分区ACL权限

[root@localhost~]#vi /etc/fstab

UUID=c2ca6f57-b15c-43ea-bca0-f239083bd2 /ext4 defaults,acl 1 1（defaultsa后加入acl）

[root@localhost~]#mount -o remount / 

+ 重新挂载文件系统或重启系统，使修改生效

# 三、ACL权限查看
1. 查看ACL命令

![](https://via.placeholder.com/800x600?text=Image+ba92759d77523e86)

# 四、ACL权限设定
1. 设定ACL权限命令

![](https://via.placeholder.com/800x600?text=Image+0e1b44d81c6addbb)

| -m | 设定ACL权限 |
| --- | --- |
| -x | 删除指定的ACL权限 |
| -b | 删除所有的ACL权限 |
| -d | 设定默认ACL权限 |
| -k | 删除默认ACL权限 |
| -R | 递归设定ACL权限 |


1. 给用户组设定ACL权限

![](https://via.placeholder.com/800x600?text=Image+bce06064aa81e551)

1. 操作实例
+ 新建用户并加入组

![](https://via.placeholder.com/800x600?text=Image+e50e7ca781b627c3)

![](https://via.placeholder.com/800x600?text=Image+46d836b0a71f2dc8)

![](https://via.placeholder.com/800x600?text=Image+5ba7fb5076a0d7a9)

+ 更改目录所有者、所属组

![](https://via.placeholder.com/800x600?text=Image+99c6476d50b82db7)

+ 设置目录权限

![](https://via.placeholder.com/800x600?text=Image+1e177abced2c9a91)

+ 查看目录权限信息

![](https://via.placeholder.com/800x600?text=Image+0d876c8be4fe0c25)

+ 给st用户设置ACL权限rx

![](https://via.placeholder.com/800x600?text=Image+1932248b9035e6dc)

+ 查看ACL权限

![](https://via.placeholder.com/800x600?text=Image+cdc50b17207b54bc)

+ 给用户组设定ACL权限

![](https://via.placeholder.com/800x600?text=Image+43cd95e163b0f1c3)

![](https://via.placeholder.com/800x600?text=Image+f675dc94acf53110)

# 五、删除ACL权限
1. 删除指定用户的ACL权限

![](https://via.placeholder.com/800x600?text=Image+01b03b5558aae5fc)

1. 删除指定用户组的ACL权限

![](https://via.placeholder.com/800x600?text=Image+aedb3c3b5a07543f)

1. 删除文件的所有的ACL权限

![](https://via.placeholder.com/800x600?text=Image+025d44fe42e69569)

# 六、最大有效权限mask
1. mask是用来指定最大有效权限的。如果我给用户赋予了ACL权限，是需要和mask的权限“相与”才能得到用户的真正权限

| A | B | and |
| --- | --- | --- |
| r | r | r |
| r | - | - |
| - | r | - |
| - | - | - |


1. 修改mask最大权限

![](https://via.placeholder.com/800x600?text=Image+7c1960b0db88ea89)

# 七、递归ACL权限
1. 递归是父目录在设定ACL权限时，所有的子文件和子目录也会拥有相同的ACL权限。
2. setfacl- m u：用户名：权限 -R 目录名
3. 递归设置ACL权限

![](https://via.placeholder.com/800x600?text=Image+ed02b534a67d4fc6)

# 八、默认ACL权限
1. 默认ACL权限的作用是如果给父目录设定了默认ACL权限，那么父目录中所有新建的子文件都会继承父目录的ACL权限。
2. setfacl -m d: u:用户名：权限文件名
3. 设置默认ACL权限

![](https://via.placeholder.com/800x600?text=Image+9ee242b2b0e771da)

 

 

#  

