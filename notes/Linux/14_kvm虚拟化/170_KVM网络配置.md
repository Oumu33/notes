# KVM网络配置
# 一、创建桥接网络
+ 参考链接[网址](https://www.linuxidc.com/Linux/2013-02/79934.htm)
1. 创建桥接网卡br0（相当于vmnet1桥接器）

cd /etc/sysconfig/network-scripts/

cp ifcfg-ens33 ifcfg-br0

1. 修改br0参数

![img_3648.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_3648.png)

1. 修改ens33参数

![img_2848.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_2848.png)

1. 重启宿主机网络服务，查看ip



1. 查看当前桥接情况

brctl show



1. 将虚拟机接口桥接到桥接器



+ 或者编辑配置文件

![img_1728.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_1728.png)





1. 查看验证



# 二、创建自定义NET网络
1. 创建自定义define网络



1. 编辑define网络配置文件

![img_4064.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_4064.png)

1. 加载自定义网络配置文件

![img_496.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_496.png)

1. 启动自定义网络配置



1. 设置自定义网络配置文件自启动

![img_352.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_352.png)

1. 查看当前连接情况

![img_416.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_416.png)

1. 在kvm虚拟机上配置

![img_3328.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_3328.png)

1. 虚拟机查看验证



# 三、使用linux bridge配置vlan隔离
1. epel源安装vconfig



1. 加载802.1q模块来支持vlan

![img_448.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_448.png)

1. 创建两个vlan



1. 创建两个网桥



1. 指定网桥ip地址

![img_176.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_176.png)

1. 连接网桥和vlan



1. 添加虚拟机到vlan

![img_2064.png](https://raw.githubusercontent.com/Oumu33/notes/main/notes/images/img_2064.png)

+ 或者使用命令

brctl delif virbr0 vnet0

brctl addif br100 vnet0

1. 设置虚拟机ip（10.10,10.20属于vlan100、10.110，10.120属于vlan200）



1. 访问测试



 


