# 聚合分析基本概念

> 来源: ELK Stack
> 创建时间: 2022-07-04T22:34:38+08:00
> 更新时间: 2026-01-11T09:26:22.404338+08:00
> 阅读量: 919 | 点赞: 0

---

## <font style="color:rgb(18, 18, 18);">简介</font>
<font style="color:rgb(18, 18, 18);">聚合分析运算是数据库中重要的特性，对于数据分析场景尤为重要。类似于关系型数据库中的 SUM，AVG, GROUP BY 等，Elasticsearch 也提供了丰富的聚合运算方式，可以满足大部分分析和查询场景。</font>

聚合分析，英文为 Aggregation，是 es 除搜索功能外提供的针对 es 数据做统计分析的功能

+ 功能丰富，提供Bucket、Metric、Pipeline等多种分析方式，可以满足大部分的分析需求
+ 实时性高，所有的计算结果都是即时返回的，而 hadoop 等大数据系统一般都是 T+1 级别的

## <font style="color:rgb(18, 18, 18);">分类</font>
es 将聚合分析主要分为如下 4 类

+ Metric，指标分析类型，如计算最大值、最小值、平均值等等
+ Bucket，分桶类型，类似 SQL 中的 GROUP BY 语法
+ Pipeline，管道分析类型，基于上一级的聚合分析结果进行再分析
+ Matrix，矩阵分析类型

## <font style="color:rgb(18, 18, 18);">基本格式</font>
```json
GET employees/_search
{
  "size": 0,  //我们一般情况下只关心聚合分析的结果，所有原数据项的查询 size 设置为 0
  "aggs" : {
    "<聚合名称 1>" : {
        "<聚合类型>" : {
            <聚合体内容>
        }
        [,"元数据" : {  [<meta_data_body>] }]?
        [,"aggregations" : { [<sub_aggregation>]+ }]?
    }
    [,"聚合名称 2>" : { ... }]*
  }
}
```

## 文档
es聚合：[https://www.elastic.co/guide/en/elasticsearch/reference/7.13/search-aggregations.html](https://www.elastic.co/guide/en/elasticsearch/reference/7.13/search-aggregations.html)


