# 故障转移
![](https://via.placeholder.com/800x600?text=Image+0f805389e5720e16)

+ 当前node-2为master节点，node-1、node-3为data节点

# 一、data节点模拟宕机
1. 将node-1关机

![](https://via.placeholder.com/800x600?text=Image+a6c6486ff5ff6ddf)

+ 说明：当前集群状态为黄色，表示主节点可用，副本节点不完全可用。

![](https://via.placeholder.com/800x600?text=Image+db4d571f2e1ece59)

+ 过一段时间观察，发现节点列表中看不到node-1，副本节点分配到了node-2和node-3，集群状态恢复到绿色。
1. 将node-1恢复

![](https://via.placeholder.com/800x600?text=Image+fece8f0f54bea2cc)

+ 可以看到，node-1恢复后，重新加入了集群，并且重新分配了节点信息。

# 二、master节点模拟宕机
1. 将node-2节点关机

![](https://via.placeholder.com/800x600?text=Image+3b3a3edcb98a079b)

+ 从结果中可以看出，集群对master进行了重新选举，选择node-1为master。并且集群状态变成黄色。

![](https://via.placeholder.com/800x600?text=Image+5d7516b11fe6f3cd)

+ 等待一段时间后，集群状态从黄色变为了绿色：
2. 将node-2恢复

![](https://via.placeholder.com/800x600?text=Image+994c6bd15df3d53a)

+ 重启之后，发现node-2可以正常加入到集群中，集群状态依然为绿色：


