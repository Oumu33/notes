# ES配置

> 来源: ELK Stack
> 创建时间: 2022-03-06T09:49:02+08:00
> 更新时间: 2026-01-11T09:25:53.047600+08:00
> 阅读量: 1582 | 点赞: 0

---

## 基础配置
```yaml
cluster.name: logging-prod
node.name: node1
network.host: _site_
discovery.seed_hosts: ["node1","node2","node3"]
cluster.initial_master_node: ["node1","node2","node3"]
path.logs: /var/log/elasticsearch
path.data: /var/data/elasticsearch
http.port: 9200
transport.port: 9300
```

+ cluster.name 定义集群名
+ node.name 定义节点名
+ network.host 定义绑定 IP 地址，_site_ 代表自动获取本地的内网 IP，如172.x.x.x
+ discovery.seed_hosts 用于节点发现，IP/hostname 均可
+ cluster.initial_master_node 用于初始化第一次时选举 master 节点，填写 node name
+ path.data 定义数据目录 path.logs 定义日志目录
+ http.port 定义 http服务的端口 
+ transport.port 定义 tcp 服务的端口

## 集群角色配置
### master only
```yaml
node.roles: [ master ]
```

### data only
```yaml
node.roles: [ data ]
```

### ingest only
```yaml
node.roles: [ ingest ]
```

## JVM配置
<font style="color:rgb(33, 37, 41);">默认情况下，Elasticsearch 会根据节点</font>[的角色](https://www.elastic.co/guide/en/elasticsearch/reference/7.13/modules-node.html#node-roles)<font style="color:rgb(33, 37, 41);">和总内存自动设置 JVM 堆大小。对于大多数生产环境，建议使用默认大小调整。</font>

实际生产环境中计算公式：**min（机器内存的一半，32GB内存）**。也就是说：取机器环境内存的一半和32GB内存之间的小值。

<font style="color:rgb(33, 37, 41);">要覆盖缺省堆大小，设置最小和最大堆大小设置，以及 。最小值和最大值必须相同。</font><font style="color:rgb(85, 85, 85);background-color:rgb(248, 248, 248);">Xms Xmx</font>

+ vim /etc/elasticsearch/jvm.options

```bash
-Xmx2g 
-Xms2g
```

## [  
](https://www.elastic.co/guide/en/elastic-stack-get-started/current/index.html)参考文档
es基础配置：[https://www.elastic.co/guide/en/elasticsearch/reference/7.13/important-settings.html](https://www.elastic.co/guide/en/elasticsearch/reference/7.2/important-settings.html)

es节点配置：[https://www.elastic.co/guide/en/elasticsearch/reference/7.13/modules-node.html](https://www.elastic.co/guide/en/elasticsearch/reference/7.13/modules-node.html)

es jvm配置：[https://www.elastic.co/guide/en/elasticsearch/reference/7.13/advanced-configuration.html](https://www.elastic.co/guide/en/elasticsearch/reference/7.13/advanced-configuration.html#set-jvm-options)


