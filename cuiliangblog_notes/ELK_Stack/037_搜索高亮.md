# 搜索高亮

> 来源: ELK Stack
> 创建时间: 2022-05-07T10:46:24+08:00
> 更新时间: 2026-01-11T09:26:22.061887+08:00
> 阅读量: 736 | 点赞: 0

---

<font style="color:rgb(77, 77, 77);">日常生活中我们使用搜索工具尝试查询一些信息的时候，常常可以看到返回的结果集中和我们查询条件相符合的字段被特殊的颜色所标记，这就是结果高亮显示。通过高亮显示用户可以明显的发现查询匹配的位置，</font>

<font style="color:rgb(77, 77, 77);">ES使用</font><font style="color:rgb(199, 37, 78);background-color:rgb(249, 242, 244);">highlight</font><font style="color:rgb(77, 77, 77);">来实现搜索结果中一个或多个字段突出显示。</font>

## 使用高亮
```bash
#  全文检索hobby字段值为read和music的文档，并高亮显示。
GET query_test/_search
{
  "query": {
    "match": {
      "hobby": "read music"
    }
  },
  "highlight": {
    "fields": {
      "hobby": {}
    }
  }
}
# 响应
{
  "took" : 5,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "skipped" : 0,
    "failed" : 0
  },
  "hits" : {
    "total" : {
      "value" : 2,
      "relation" : "eq"
    },
    "max_score" : 2.0108495,
    "hits" : [
      {
        "_index" : "query_test",
        "_type" : "_doc",
        "_id" : "6",
        "_score" : 2.0108495,
        "_source" : {
          "id" : "6",
          "name" : "alex2",
          "age" : 22,
          "email" : "query_test6@qq.com",
          "hobby" : "read music movie",
          "birth" : "2000-03-03"
        },
        "highlight" : {
          "hobby" : [
            "<em>read</em> <em>music</em> movie"
          ]
        }
      },
      {
        "_index" : "query_test",
        "_type" : "_doc",
        "_id" : "7",
        "_score" : 2.0108495,
        "_source" : {
          "id" : "7",
          "name" : "anni",
          "age" : 22,
          "email" : "anni@qq.com",
          "hobby" : "read music movie"
        },
        "highlight" : {
          "hobby" : [
            "<em>read</em> <em>music</em> movie"
          ]
        }
      }
    ]
  }
}
```

## 设置高亮标签
默认高亮使用<em></em>可设置其他高亮标签

```bash
# 自定义高亮使用strong标签
GET query_test/_search
{
  "query": {
    "match": {
      "hobby": "read music"
    }
  },
  "highlight": {
    "fields": {
      "hobby": {}
    },
    "pre_tags": [
      "<strong>"
    ],
    "post_tags": [
      "</strong>"
    ]
  }
}
# 响应
{
  "took" : 4,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "skipped" : 0,
    "failed" : 0
  },
  "hits" : {
    "total" : {
      "value" : 2,
      "relation" : "eq"
    },
    "max_score" : 2.0108495,
    "hits" : [
      {
        "_index" : "query_test",
        "_type" : "_doc",
        "_id" : "6",
        "_score" : 2.0108495,
        "_source" : {
          "id" : "6",
          "name" : "alex2",
          "age" : 22,
          "email" : "query_test6@qq.com",
          "hobby" : "read music movie",
          "birth" : "2000-03-03"
        },
        "highlight" : {
          "hobby" : [
            "<strong>read</strong> <strong>music</strong> movie"
          ]
        }
      },
      {
        "_index" : "query_test",
        "_type" : "_doc",
        "_id" : "7",
        "_score" : 2.0108495,
        "_source" : {
          "id" : "7",
          "name" : "anni",
          "age" : 22,
          "email" : "anni@qq.com",
          "hobby" : "read music movie"
        },
        "highlight" : {
          "hobby" : [
            "<strong>read</strong> <strong>music</strong> movie"
          ]
        }
      }
    ]
  }
}
```

## 参考文档
es搜索结果高亮

[https://www.elastic.co/guide/en/elasticsearch/reference/7.13/highlighting.html](https://www.elastic.co/guide/en/elasticsearch/reference/7.13/highlighting.html)


