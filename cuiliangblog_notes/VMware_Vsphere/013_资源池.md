# 资源池
# 一、什么是资源池？
在"主机和群集"目录视图中，资源池是一种特定的容器对象，是一个逻辑抽象概念，用于分层管理CPU和内存资源。可以在独立的主机上创建资源池，或者在启用DRS功能的群集中创建资源池作为管理对象。

1. 新建资源池
+ 登录vSphereClient，右击'群集"目录，选择"新建资源池"

![](https://via.placeholder.com/800x600?text=Image+000eef08918e75ef)

+ 新建资源池界面详解：

![](https://via.placeholder.com/800x600?text=Image+4b464f1e32dc092f)

**名称：**输入资源池名称

**份额：**可以理解为虚拟机的相对重要性。通常指定为高、正常、低，比例是按照4：2：1指定份额。当然也可以自己自定义。

**预留：**可以指定为虚拟机分配的最少资源量。默认为0。"预留类型"，选定"可扩展"的情况下，如果虚拟机打开时资源不够用，则可以向父级请求资源。

**限制：**为分配到虚拟机的CPU、内存或存储丨/O资源指定上限。

![](https://via.placeholder.com/800x600?text=Image+ee64a4fcd193c159)

+ 创建完成后的资源池，我们可以在资源池中创建虚拟机、模板等。

![](https://via.placeholder.com/800x600?text=Image+8b04a093cb3748bd)

# 三、应用
A公司有两个内部客户：

+ 财务部提供预算的2/3
+ 工程部提供预算的1/3

每个内部客户都拥有生产和测试/开发虚拟

1. 资源池

主机资源（根资源池）CPU 12000MH、内存4GB。工程资源池如下：份额、预留、限制均有一定配置。资源池中创建有工程测试虚拟机及工程生产虚拟机。

![](https://via.placeholder.com/800x600?text=Image+207ef6b9ead77611)

1. CPU份额

整个的CPU份额分配如下：工程资源池、财务次源池等

![](https://via.placeholder.com/800x600?text=Image+b3490193466c09cb)

1. CPU争用

我们根据应用重要程度，配置不同的CPU份额（注意：份额必须在有资源争用的情况下才起作用），在CPU争用情况下，按照份额分配资源，工程部占总资源33％、财务部占67％。同理，虚拟机占用资源按照该资源池下虚拟机分配份额比例计算即可。

![](https://via.placeholder.com/800x600?text=Image+a8417290c345ee9e)

1. 可扩展预留

以递归的方式从当前资源池的父级资源池中借用资源。直到引发扩展的虚拟机关闭或其预留减少时，才会释放扩展的预留。

如下："零售"资源池预留了3000MHZ，"电子商务"资源池共预留了其中的2200MHZ。启动"电子商务网站"资源池中的虚拟机时，在"电子商务网站"资源池中禁用了"扩展预留"选项，就无法已500MHz的预留量启动VM3虚拟机。

![](https://via.placeholder.com/800x600?text=Image+6a54b5e1d5eae049)

1. CPU和内存预留的接入控制

![](https://via.placeholder.com/800x600?text=Image+42058da8a5cb2698)

# 四、为什么使用资源池？
1. 灵活的层次结构组织方式
2. 资源池之间相互隔离，而资源池内部则相互共享
3. 访问控制和委派
4. 资源与硬件分离
5. 可管理运行多层服务的多组虚拟机


