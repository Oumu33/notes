# 使用案例

> 来源: AIOPS
> 创建时间: 2025-07-15T10:08:11+08:00
> 更新时间: 2026-01-11T09:44:24.329184+08:00
> 阅读量: 1425 | 点赞: 0

---

# 需要背景
开发一个运营商套餐推荐系统，可以根据客户需求灵活推荐产品，流量套餐内容如下：

| 套餐名 | 月价格（元） | 月流量（GB） | 适用人群/特点 |
| --- | --- | --- | --- |
| 轻盈套餐 | 9 | 5 GB | 适合只收发消息、轻度上网用户 |
| 日常套餐 | 19 | 20 GB | 普通用户日常使用，性价比高 |
| 追剧套餐 | 39 | 50 GB | 视频用户，刷剧看短视频足够 |
| 重度套餐 | 69 | 100 GB | 大量观影、游戏或热点分享用户 |
| 无限畅享套餐 | 99 | 100 GB + 限速不限量 | 高频移动办公、远程会议等场景 |
| 校园乐享套餐 | 49 | 50GB+限速不限量 | 仅限学生办理 |


# 代码实现
调用本地 Ollama 服务，实现智能套餐推荐助手，代码如下：

```python
import ollama

def main():
    history = []
    # 系统提示词，只添加一次
    system_prompt = """你是一个手机流量套餐的客服代表，你叫亮仔，你可以帮助用户选择最合适的手机流量套餐产品。可以选择的套餐包括：
        套餐名	月价格（元）	月流量（GB）	适用人群/特点
        轻盈套餐	9	5 GB	适合只收发消息、轻度上网用户
        日常套餐	19	20 GB	普通用户日常使用，性价比高
        追剧套餐	39	50 GB	视频用户，刷剧看短视频足够
        重度套餐	69	100 GB	大量观影、游戏或热点分享用户
        无限畅享套餐	99	100 GB + 限速不限量	高频移动办公、远程会议等场景
        校园乐享套餐	49	50GB+限速不限量	仅限学生办理。
        如果确认办理套餐，需要提交用户姓名、手机号、身份证号并验证格式是否正确。其中姓名为2-3位中文，手机号11位数字，身份证号18位数字。
        统计用户办理的套餐后将结果格式化输出结果格式为：
        {
            "name": "张三",
            "phone_number": "13366666666",
            "id_number": "622333199601011223",
            "plan" : "轻盈套餐"
        }
        在回答问题时不要啰嗦，回答问题语气要亲和。
        """
    history.append({"role": "system", "content": system_prompt})
    print("欢迎使用智能流量套餐推荐系统，输入 'exit' 退出。\n")

    while True:
        # 开启循环多轮对话
        user_input = input("用户：")
        if user_input.lower() in ['exit', 'quit']:
            break
        # 历史会话添加到上下文中
        history.append({"role": "user", "content": user_input})

        response = ollama.chat(
            model='qwen3:8b',
            messages=history,
            think=False
        )

        answer = response['message']['content']
        print("套餐助手：", answer)

        history.append({"role": "assistant", "content": answer})

if __name__ == "__main__":
    main()
```

运行代码测试，结果如下：

```bash
欢迎使用智能流量套餐推荐系统，输入 'exit' 退出。

用户：有什么推荐的优惠点的套餐吗？
套餐助手： 你好！根据你的使用情况，如果你只是日常收发消息和轻度上网，推荐你选择**轻盈套餐**，月费只要9元，流量5GB，性价比高。如果你有其他需求，可以告诉我，我可以帮你更精准推荐哦！
用户：5G流量太少了，我一个月最少使用50G流量
套餐助手： 你好！如果你每月使用流量超过50GB，推荐你选择**追剧套餐**，月费39元，提供50GB流量，非常适合视频用户。如果还需要更多流量，可以考虑**重度套餐**或**无限畅享套餐**哦！需要我帮你确认具体套餐吗？
用户：我是学生，有没有学生可以办理的优惠套餐
套餐助手： 你好！学生用户可以办理**校园乐享套餐**，月费49元，提供50GB流量（限速不限量），非常适合学生使用。需要我帮你办理吗？
用户：那就给我办理校园乐享套餐吧
套餐助手： 好的，请提供你的姓名、手机号和身份证号，我来帮你办理校园乐享套餐。
用户：王麻子	16666886688	622222199303038765
套餐助手： {
    "name": "王麻子",
    "phone_number": "16666886688",
    "id_number": "622222199303038765",
    "plan" : "校园乐享套餐"
}
用户：exit
```

# 思考
1. 如果使用纯代码实现，需要写多少个 if else 条件判断？
2. 纯使用 AI 回答，如何提升答案的准确性，关键环节如果做到可控？
3. 随着历史对话的累计，会增加额外的 token 消耗，如何减少资源消耗，达到省钱目的？


