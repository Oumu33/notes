# 简介

> 分类: ELK Stack > Filebeat
> 更新时间: 2026-01-10T23:33:40.572328+08:00

---

# 功能
Filebeat是本地文件的日志数据采集器，可监控日志目录或特定日志文件（tail file），并将它们转发给Elasticsearch或Logstatsh进行索引、kafka等。带有内部模块（auditd，Apache，Nginx，System和MySQL），可通过一个指定命令来简化通用日志格式的收集，解析和可视化

# 架构
![](../../images/img_1878.png)

# Filebeat工作原理
Filebeat由两个主要组件组成：查找器prospector 和 采集器harvester。

1. harvester：

负责读取单个文件的内容。

如果文件在读取时被删除或重命名，Filebeat将继续读取文件。

2. prospector

prospector 负责管理harvester并找到所有要读取的文件来源。

如果输入类型为日志，则查找器将查找路径匹配的所有文件，并为每个文件启动一个harvester。

Filebeat目前支持两种prospector类型：log和stdin。

3. Filebeat如何保持文件的状态

Filebeat      保存每个文件的状态并经常将状态刷新到磁盘上的注册文件中。

该状态用于记住harvester正在读取的最后偏移量，并确保发送所有日志行。

如果输出（例如Elasticsearch或Logstash）无法访问，Filebeat会跟踪最后发送的行，并在输出再次可用时继续读取文件。

在Filebeat运行时，每个prospector内存中也会保存的文件状态信息，当重新启动Filebeat时，将使用注册

文件的数据来重建文件状态，Filebeat将每个harvester在从保存的最后偏移量继续读取。

文件状态记录在data/registry文件中。

 

