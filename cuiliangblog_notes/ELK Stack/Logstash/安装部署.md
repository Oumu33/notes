# 安装部署

> 分类: ELK Stack > Logstash
> 更新时间: 2026-01-10T23:33:41.988694+08:00

---

# 下载地址logstash
官方下载地址：[https://www.elastic.co/cn/downloads/past-releases#logstash](https://www.elastic.co/cn/downloads/past-releases#logstash)

# yum方式部署
```bash
# rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch
# cat > /etc/yum.repos.d/elastic.repo << EOF
[elastic-8.x]
name=Elastic repository for 8.x packages
baseurl=https://artifacts.elastic.co/packages/8.x/yum
gpgcheck=1
gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch
enabled=1
autorefresh=1
type=rpm-md
EOF
# yum -y install logstash
# systemctl enable logstash
# ln -s /usr/share/logstash/bin/logstash /usr/bin/logstash
# logstash -V
Using bundled JDK: /usr/share/logstash/jdk
logstash 8.12.2
```

# rpm方式部署
```bash
# wget https://artifacts.elastic.co/downloads/logstash/logstash-8.10.4-x86_64.rpm
# rpm -ivh logstash-8.10.4-x86_64.rpm
```

# 二进制方式部署
```bash
# 下载软件包并修改权限
[root@logstash ~]# wget https://artifacts.elastic.co/downloads/logstash/logstash-8.12.2-linux-x86_64.tar.gz
[root@logstash ~]# useradd logstash
[root@logstash ~]# tar -zxf logstash-8.12.2-linux-x86_64.tar.gz
[root@logstash ~]# mv logstash-8.12.2 /opt/logstash
[root@logstash ~]# chown -R logstash:logstash /opt/logstash

# 切换logstash用户启动测试
[root@logstash ~]# su logstash
[logstash@logstash ~]$ cd /opt/logstash/bin/
[logstash@logstash bin]$ ./logstash -f /opt/logstash/config/logstash-sample.conf

# 注册systemctl服务
[root@logstash config]# vim /etc/systemd/system/logstash.service
[Unit]
Description=logstash

[Service]
Type=simple
User=logstash
Group=logstash

ExecStart=/opt/logstash/bin/logstash -f /opt/logstash/config/logstash-sample.conf
Restart=always
WorkingDirectory=/
Nice=19
LimitNOFILE=16384
TimeoutStopSec=infinity

[Install]
WantedBy=multi-user.target
[root@logstash config]# systemctl daemon-reload 
[root@logstash config]# systemctl enable logstash --now
```

# docker部署
拉取镜像

```bash
docker pull docker.elastic.co/logstash/logstash:8.8.2
```

挂载logstash配置文件和pipeline

```bash
docker run -v ~/settings/logstash.yml:/usr/share/logstash/config/logstash.yml -v ~/pipeline/pipeline.yml:/usr/share/logstash/pipeline/pipeline.yml docker.elastic.co/logstash/logstash:8.8.2
```

自定义dockerfile

```dockerfile
FROM docker.elastic.co/logstash/logstash:8.8.2
RUN rm -f /usr/share/logstash/pipeline/logstash.conf
COPY pipeline.yml /usr/share/logstash/pipeline/pipeline.yml
COPY logstash.yml /usr/share/logstash/config/logstash.yml
```

