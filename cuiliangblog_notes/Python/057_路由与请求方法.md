# 路由与请求方法

> 来源: Python
> 创建时间: 2025-11-13T22:46:38+08:00
> 更新时间: 2026-01-11T09:25:43.013553+08:00
> 阅读量: 95 | 点赞: 0

---

# 路由介绍
## 什么是路由
在 Web 开发中，“路由（Route）”指的是将 URL 路径与对应的处理逻辑（函数）关联起来。

FastAPI 中通过装饰器（如 `@app.get()`、`@app.post()` 等）来定义路由，告诉框架：当客户端访问某个路径，并使用某个方法时，应该调用哪个函数来处理请求。

## FastAPI 支持的请求方法
FastAPI 支持所有常见的 HTTP 请求方法：

| 方法 | 说明 |
| --- | --- |
| `GET` | 获取资源 |
| `POST` | 创建资源 |
| `PUT` | 更新整个资源（完全替换） |
| `PATCH` | 部分更新资源（局部修改） |
| `DELETE` | 删除资源 |
| `OPTIONS` | 获取服务器支持的通信选项 |
| `HEAD` | 获取响应头而不返回响应体 |


常用的是前五种（GET、POST、PUT、PATCH、DELETE）。

# 使用案例
## 定义基本路由
下面是一个最基本的例子：

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def read_root():
    """
    处理根路径的GET请求
    
    Returns:
        dict: 包含欢迎消息的字典，格式为{"message": "Hello, FastAPI!"}
    """
    return {"message": "Hello, FastAPI!"}
```

访问 `http://127.0.0.1:8000/` 时，FastAPI 会执行 `read_root()` 函数，返回一个 JSON 响应。

## 为同一路径定义多个方法
FastAPI 支持在同一路径下定义多个方法，例如：

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()


class Item(BaseModel):
    """
    商品数据模型类

    Attributes:
        name (str): 商品名称
        price (float): 商品价格
    """
    name: str
    price: float


@app.get("/items/")
def read_items():
    """
    获取商品列表接口

    Returns:
        list: 包含商品信息的字典列表，每个字典包含商品名称和价格
    """
    return [{"name": "Apple", "price": 3.5}, {"name": "Banana", "price": 2.0}]


@app.post("/items/")
def create_item(item: Item):
    """
    创建新商品接口

    Args:
        item (Item): 商品对象，包含名称和价格信息

    Returns:
        dict: 包含创建成功消息和商品信息的字典
    """
    return {"message": "Item created", "item": item}
```

+ 访问 `GET /items/` 会返回一个商品列表；
+ 向 `POST /items/` 发送 JSON 数据，会创建一个新商品。

这种方式正是 RESTful API 设计的核心：一个路径代表一个资源，不同方法代表对该资源的不同操作。

## 使用路径参数定义路由
你可以在路径中使用变量来动态匹配内容，例如：

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/users/{user_id}")
def get_user(user_id: int):
    """
    根据用户ID获取用户信息
    
    参数:
        user_id (int): 用户的唯一标识符
        
    返回:
        dict: 包含用户ID的字典对象
    """
    return {"user_id": user_id}

```

访问 `/users/123` 时，`user_id` 的值将为 `123`，类型为整数。

FastAPI 会自动进行类型转换和验证，如果传入的是非整数，例如 `/users/abc`，会返回 422 错误。

## 多个路径指向同一个函数
你可以为不同路径设置相同的处理函数，实现路径别名的效果。例如：

```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/home")
@app.get("/index")
def homepage():
    """
    处理主页请求的视图函数
    
    该函数绑定到两个路由路径："/home" 和 "/index"，当用户访问这两个路径时，
    将返回欢迎信息。
    
    返回值:
        dict: 包含欢迎消息的字典，格式为 {"message": "Welcome to homepage!"}
    """
    return {"message": "Welcome to homepage!"}
```

这样无论访问 `/home` 还是 `/index`，都会返回相同的结果。


