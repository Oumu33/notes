# 序列化

> 分类: Python > DRF序列化器
> 更新时间: 2026-01-10T23:34:30.201818+08:00

---

## 一、序列化器作用
![](../../images/img_4144.png)

+ 反序列化: 把json(dict), 转成模型类对象 (校验,入库)
+ 序列化: 将模型类对象, 转成json(dict)数据

## 二、创建序列化
### 1. 创建model对象
> 创建一个图书信息对象和作者对象，在图书信息中通过外键多对一关联作者信息
>

```python
from django.db import models


class UserInfo(models.Model):
    name = models.CharField(max_length=20, verbose_name='姓名')
    GENDER_CHOICES = (
        (0, 'men'),
        (1, 'women')
    )
    gender = models.SmallIntegerField(choices=GENDER_CHOICES, default=0, verbose_name='性别')
    is_delete = models.BooleanField(default=False, verbose_name='逻辑删除')

    class Meta:
        verbose_name = '作者信息'
        verbose_name_plural = verbose_name

    def __str__(self):
        return self.name


class BookInfo(models.Model):
    name = models.CharField(max_length=20, verbose_name='书名')
    releas_date = models.DateField(verbose_name='发布日期')
    read = models.IntegerField(verbose_name='阅读量', default=0)
    comment = models.IntegerField(verbose_name='评论量', default=0)
    is_delete = models.BooleanField(default=False, verbose_name='逻辑删除')
    author = models.ForeignKey(UserInfo, on_delete=models.CASCADE, verbose_name='作者')

    class Meta:
        verbose_name = '图书信息'
        verbose_name_plural = verbose_name

    def __str__(self):
        return self.name
```

### 2. 创建序列化类(app目录下创建serializers.py文件)
> 定义类，继承自serializer，参照model对象编写，名字，类型，字段选项保持一致，并添加只读的id属性
>

```python
from rest_framework import serializers

# 定义作者信息序列化器
class UserInfoSerializer(serializers.Serializer):
    GENDER_CHOICES = (
        (0, 'men'),
        (1, 'women')
    )
    id = serializers.IntegerField(label='ID', read_only=True)
    name = serializers.CharField(label='名字', max_length=20)
    gender = serializers.ChoiceField(choices=GENDER_CHOICES, label='性别', required=False)
    is_delete = serializers.BooleanField(default=False, label='逻辑删除')


# 定义图书信息序列化器
class BookInfoSerializer(serializers.Serializer):
    id = serializers.IntegerField(label='id', read_only=True)
    name = serializers.CharField(max_length=20, label='书名')
    releas_date = serializers.DateField(label='发布日期')
    read = serializers.IntegerField(default=0, label='阅读量')
    is_delete = serializers.BooleanField(default=False, label='逻辑删除')
    # 外键关联暂不处理
```

### 3. 序列化类参数
+ **选项参数**

| 参数名称 | 作用 |
| :---: | :---: |
| **max_length** | 最大长度 |
| **min_lenght** | 最小长度 |
| **allow_blank** | 是否允许为空 |
| **trim_whitespace** | 是否截断空白字符 |
| **max_value** | 最小值 |
| **min_value** | 最大值 |


+ **通用参数**

| 参数名称 | 作用 |
| --- | --- |
| read_only | 表明该字段仅用于序列化输出，默认False |
| write_only | 表明该字段仅用于反序列化输入，默认False |
| **allow_blank** | 是否允许为空 |
| **trim_whitespace** | 是否截断空白字符 |
| **max_value** | 最小值 |
| **min_value** | 最大值 |




