# Pod控制器

> 来源: Kubernetes
> 创建时间: 2020-10-31T15:45:53+08:00
> 更新时间: 2026-01-11T09:06:03.484593+08:00
> 阅读量: 1219 | 点赞: 0

---

# 一、Pod控制器概述


1. Master的各组件中，API Server仅负责将资源存储于etcd中，并将其变动通知给各相关的客户端程序，如kubelet、kube-scheduler、kube-proxy和kube-controller-manager等，kube-scheduler监控到处于未绑定状态的Pod对象出现时遂启动调度器为其挑选适配的工作节点。
2. Kubernetes的核心功能之一还在于要确保各资源对象的当前状态（status）以匹配用户期望的状态（spec），使当前状态不断地向期望状态“和解”（reconciliation）来完成容器应用管理，而这些则是kube-controller-manager的任务。
3. 创建为具体的控制器对象之后，每个控制器均通过API Server提供的接口持续监控相关资源对象的当前状态，并在因故障、更新或其他原因导致系统状态发生变化时，尝试让资源的当前状态向期望状态迁移和逼近。



# 二、控制器与Pod对象


1. Pod控制器资源通过持续性地监控集群中运行着的Pod资源对象来确保受其管控的资源严格符合用户期望的状态，例如资源副本的数量要精确符合期望等。
2. 一个Pod控制器资源至少应该包含三个基本的组成部分。



+ 标签选择器：匹配并关联Pod资源对象，并据此完成受其管控的Pod资源计数。
+ 期望的副本数：期望在集群中精确运行着的Pod资源的对象数量。
+ Pod模板：用于新建Pod资源对象的Pod模板资源。



# 三、Pod资源模板


1. Pod模板的配置信息中不需要apiVersion和kind字段，但除此之外的其他内容与定义自主式Pod对象所支持的字段几乎完全相同，这包括metadata和spec及其内嵌的其他各个字段。
2. Pod控制器类资源的spec字段通常都要内嵌replicas、selector和template字段，其中template即为Pod模板的定义。
3. 下面是一个定义在Deployment资源中的模板资源示例：

![](https://via.placeholder.com/800x600?text=Image+2db17c0f61afeddc)


