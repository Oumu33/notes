# 系统初始化

> 来源: Linux
> 创建时间: 2021-02-16T16:50:09+08:00
> 更新时间: 2026-01-11T09:43:20.445396+08:00
> 阅读量: 823 | 点赞: 0

---

# 修改主机名
```bash
hostnamectl set-hostname muban-9
```

# 关闭防火墙和selinux
```bash
systemctl stop firewalld.service
systemctl  disable firewalld
setenforce  0
sed  -i 's/enforcing/disabled/g' /etc/selinux/config
grep  SELINUX= /etc/selinux/config 
```

# 关闭swap交换分区
```bash
swapoff -a  
sed -i '/ swap / s/^\(.*\)$/#\1/g' /etc/fstab  
```

# 配置国内yum源
## rhel8
```bash
curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo
# 安装 epel 配置包
yum install -y https://mirrors.aliyun.com/epel/epel-release-latest-8.noarch.rpm 
# 将 repo 配置中的地址替换为阿里云镜像站地址
sed -i 's|^#baseurl=https://download.example/pub|baseurl=https://mirrors.aliyun.com|' /etc/yum.repos.d/epel* 
sed -i 's|^metalink|#metalink|' /etc/yum.repos.d/epel*
yum clean all && yum makecache
```

## rockylinux
```bash
sed -e 's|^mirrorlist=|#mirrorlist=|g' \
    -e 's|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g' \
    -i.bak \
    /etc/yum.repos.d/[Rr]ocky*.repo
```

# 关闭sshd解析
```bash
sed  -i "s/#UseDNS yes/UseDNS no/g" /etc/ssh/sshd_config
systemctl restart sshd 
```

# 美化vim
```bash
echo  "set nu" >> ~/.vimrc
echo  "set ts=4" >> ~/.vimrc 
cat  ~/.vimrc
```

# 配置时间同步
```bash
dnf -y install chrony
systemctl  start chronyd
systemctl  enable chronyd
timedatectl set-timezone Asia/Shanghai
chronyc sourcestats -v 
date
```

# 安装docker
```bash
yum install -y yum-utils
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
yum install -y docker-ce docker-ce-cli containerd.io
mkdir -p /etc/docker
tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
        "https://mirror.ccs.tencentyun.com",
        "https://o2j0mc5x.mirror.aliyuncs.com"
    ]
}
EOF
systemctl daemon-reload
systemctl enable docker
systemctl restart docker
```

# 安装常用软件
```bash
dnf -y install epel-* vim git wget gcc gcc-c++ net-tools telnet glances && dnf -y update
```

# 安装rsyslog
从RHEL8开始默认不安装rsyslog，导致/var/log/secure登录日志文件不存在。

```bash
dnf -y install rsyslog
systemctl enable rsyslog --now
```

# 开启journal日志持久化
默认情况下journald日志未开启持久化，重启服务器丢失，可将服务日志保存至/var/log/journal下。

```bash
[root@work1 ~]# vim /etc/systemd/journald.conf
Storage=persistent
[root@work1 ~]# systemctl restart systemd-journald
```


