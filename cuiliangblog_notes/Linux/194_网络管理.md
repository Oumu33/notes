# 网络管理

> 来源: Linux
> 创建时间: 2021-02-16T16:51:22+08:00
> 更新时间: 2026-01-11T09:43:18.496020+08:00
> 阅读量: 916 | 点赞: 0

---

# rhel8与7的区别
1. 在rhel7上，同时支持network.service和NetworkManager.service（简称NM）。默认情况下，这2个服务都有开启，但许多人都会将NM禁用掉。
2. 在rhel8上，已废弃network.service，因此只能通过NM进行网络配置，包括动态ip和静态ip。换言之，在rhel8上，必须开启NM，否则无法使用网络。
3. rhel8依然支持network.service，只是默认没安装。

# nmcli常用命令
| 命令 | 功能 | 等价命令 |
| --- | --- | --- |
| nmcli | 查看ip | ifconfig、ip addr |
| nmcli c add type   ethernet con-name ethX ifname ethX ipv4.addr 192.168.1.100/24 ipv4.gateway   192.168.1.1 ipv4.method manual | 创建connection，配置静态ip | 配置ifcfg，其中BOOTPROTO=none，并ifup启动 |
| nmcli c   add type ethernet con-name ethX ifname ethX ipv4.method auto | 创建connection，配置动态ip | 配置ifcfg，其中BOOTPROTO=dhcp，并ifup启动 |
| nmcli c   modify ethX ipv4.addr '192.168.1.200/24'<br/>nmcli c up   ethX | 修改ip（非交互式） |   |
| nmcli c edit ethX<br/>nmcli> goto   ipv4.addresses<br/>nmcli   ipv4.addresses> change<br/>Edit 'addresses'   value: 192.168.1.200/24<br/>Do you also want to   set 'ipv4.method' to 'manual'? [yes]: yes<br/>nmcli ipv4> save<br/>nmcli ipv4>   activate<br/>nmcli ipv4> quit | 修改ip（交互式） |   |
| nmcli c up ethX |  启用connection | ifup |
| nmcli c   down | 停止connection | ifdown |
| nmcli c delete ethX | 删除connection | ifdown并删除ifcfg |
| nmcli c   show | 查看connection列表 |   |
| nmcli c show ethX | 查看connection详细信息 |   |
| nmcli c reload | 重载所有ifcfg或route到connection（不会立即生效） |   |
| nmcli c load   /etc/sysconfig/network-scripts/ifcfg-ethX<br/>nmcli c load   /etc/sysconfig/network-scripts/route-ethX | 重载指定ifcfg或route到connection（不会立即生效） |   |
| nmcli c up ethX<br/>nmcli d reapply ethX<br/>nmcli d connect ethX | 立即生效connection |   |


# nmcli配置IP
## RHEL8
假设网卡标识符为ens160

```bash
[root@muban ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens160 
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=no
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=eui64
NAME=ens160
DEVICE=ens160
ONBOOT=yes
IPV6_DISABLED=yes
BOOTPROTO=dhcp # 使用dhcp模式自动分配ip

# 使用静态模式指定ip
#BOOTPROTO=static
#IPADDR=192.168.10.128
#PREFIX=24
#GATEWAY=192.168.10.2
#DNS1=114.114.114.114
```

使用nmcli重新加载网络配置

`nmcli c reload`

使配置立即生效

`nmcli c up xxx`（只开启指定的网卡）

## RHEL9
假设网卡标识符为ens160

```bash
[root@muban-9 ~]# vim /etc/NetworkManager/system-connections/ens160.nmconnection 
[connection]
id=ens160
type=ethernet
autoconnect-priority=-999
interface-name=ens160
timestamp=1687857875

[ethernet]

[ipv4]
method=auto # dncp自动获取
# static指定ip
address1=192.168.10.222/24,192.168.10.2
dns=114.114.114.114;
method=manual

[ipv6]
addr-gen-mode=eui64
method=disable

[proxy]
```

使用nmcli重新加载网络配置

`nmcli c reload`

使配置立即生效

`nmcli c up xxx`（只开启指定的网卡）

# nmtui图形界面配置
`nmtui`

![](https://via.placeholder.com/800x600?text=Image+feaa936ab1f85a4b)

 


