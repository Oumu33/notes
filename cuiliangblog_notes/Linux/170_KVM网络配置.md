# KVM网络配置

> 来源: Linux
> 创建时间: 2021-02-16T16:14:52+08:00
> 更新时间: 2026-01-11T09:41:27.473717+08:00
> 阅读量: 837 | 点赞: 0

---

# 一、创建桥接网络
+ 参考链接[网址](https://www.linuxidc.com/Linux/2013-02/79934.htm)
1. 创建桥接网卡br0（相当于vmnet1桥接器）

cd /etc/sysconfig/network-scripts/

cp ifcfg-ens33 ifcfg-br0

1. 修改br0参数

![](https://via.placeholder.com/800x600?text=Image+39bffca249c56999)

1. 修改ens33参数

![](https://via.placeholder.com/800x600?text=Image+b4aa2dde95682dae)

1. 重启宿主机网络服务，查看ip

![](https://via.placeholder.com/800x600?text=Image+9339ea91bf07781f)

1. 查看当前桥接情况

brctl show

![](https://via.placeholder.com/800x600?text=Image+70d9501aa9cb747f)

1. 将虚拟机接口桥接到桥接器

![](https://via.placeholder.com/800x600?text=Image+b702681771e4bfd8)

+ 或者编辑配置文件

![](https://via.placeholder.com/800x600?text=Image+bf991a9f190b0a46)

![](https://via.placeholder.com/800x600?text=Image+f49497729a281a71)

![](https://via.placeholder.com/800x600?text=Image+930a790e88cce9a1)

1. 查看验证

![](https://via.placeholder.com/800x600?text=Image+170ebf4565e524ac)

# 二、创建自定义NET网络
1. 创建自定义define网络

![](https://via.placeholder.com/800x600?text=Image+5883eaa93ce37e39)

1. 编辑define网络配置文件

![](https://via.placeholder.com/800x600?text=Image+cc925440dd36fc70)

1. 加载自定义网络配置文件

![](https://via.placeholder.com/800x600?text=Image+a22e77323e81a7ba)

1. 启动自定义网络配置

![](https://via.placeholder.com/800x600?text=Image+79602634355b0d9d)

1. 设置自定义网络配置文件自启动

![](https://via.placeholder.com/800x600?text=Image+d8474b36d43ee9ea)

1. 查看当前连接情况

![](https://via.placeholder.com/800x600?text=Image+7ab7c8cae160bbdc)

1. 在kvm虚拟机上配置

![](https://via.placeholder.com/800x600?text=Image+7b48e864d50b48bf)

1. 虚拟机查看验证

![](https://via.placeholder.com/800x600?text=Image+337cb1d12a4b830a)

# 三、使用linux bridge配置vlan隔离
1. epel源安装vconfig

![](https://via.placeholder.com/800x600?text=Image+7886441e9048d24b)

1. 加载802.1q模块来支持vlan

![](https://via.placeholder.com/800x600?text=Image+135f8c73f821447c)

1. 创建两个vlan

![](https://via.placeholder.com/800x600?text=Image+8af96afbb5f4b19e)

1. 创建两个网桥

![](https://via.placeholder.com/800x600?text=Image+1f2d1bded82cbd8a)

1. 指定网桥ip地址

![](https://via.placeholder.com/800x600?text=Image+6a12f01fa173dcdd)

1. 连接网桥和vlan

![](https://via.placeholder.com/800x600?text=Image+421cdc2e5a0094d6)

1. 添加虚拟机到vlan

![](https://via.placeholder.com/800x600?text=Image+91f1a2cd6cee9f4b)

+ 或者使用命令

brctl delif virbr0 vnet0

brctl addif br100 vnet0

1. 设置虚拟机ip（10.10,10.20属于vlan100、10.110，10.120属于vlan200）

![](https://via.placeholder.com/800x600?text=Image+ca76eb32d2bbd80c)

1. 访问测试

![](https://via.placeholder.com/800x600?text=Image+5b17301507a5753c)

 


