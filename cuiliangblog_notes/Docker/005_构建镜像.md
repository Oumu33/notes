# 构建镜像
# 一、docker commit（基于已有镜像）
1. 第一步：运行容器

[root@bogon ~]# docker run -it centos

2. 第二步：进行自定义操作（安装vim）

[root@5db3417f4eb6 /]# yum -y install vim

3. 第三步：在宿主机操作，查看容器名称

![](https://via.placeholder.com/800x600?text=Image+a4a55b07ba7563a6)

4. 第四步：将容器保存为镜像

[root@bogon ~]# docker commit brave_austin centos-vim

5. 或者根据容器id直接创建

[root@docker ~]# docker commit db1f98bb8a55 docker-vim

6. 第五步：查看新镜像属性

[root@bogon ~]# docker images centos-vim

7. 第六步：从新镜像启动容器，验证操作

[root@bogon ~]# docker run -it centos-vim

# 二、docker import（本地模板导入）
1. 第一步：访问openvz模板网站，下载模板文件

https://wiki.openvz.org/Download/template/precreated

2. 第二步：导入到docker镜像中

[root@docker ~]# cat ubuntu-18.04-x86_64-minimal.tar.gz | docker import - ubuntu:18.04

3. 第三步：查看镜像列表

[root@docker ~]# docker images

# 三、Dockerfile 构建镜像
1. 第一步：准备Dockerfile文件

[root@bogon ~]# mkdir /docker

[root@bogon ~]# touch  /docker/Dockerfile

[root@bogon docker]# cat Dockerfile 

FROM centos

RUN yum -y install vim

2. 第二步：使用docker build 创建镜像

[root@bogon docker]# docker build -t centos-vim-dockerfile .

-t：创建镜像的标签

. 表示Dockerfile文件在当前路径

-f 参数指定 Dockerfile 的位置

3. 第三步：查看centos-vim-dockerfile镜像信息

[root@bogon docker]# docker images centos-vim-dockerfile

4. 第四步：查看镜像构建历史，验证镜像

[root@bogon docker]# docker history centos-vim-dockerfile


